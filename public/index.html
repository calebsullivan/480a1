<!DOCTYPE html>
<html class="html">
 <head>
  <meta http-equiv="Content-type" content="text/html;charset=UTF-8"/>
  <link rel="shortcut icon" href="images/favicon.ico?130460709"/>
  <title>60-411 Assignment 1</title>
  <!-- CSS -->
  <link rel="stylesheet" type="text/css" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css"/>
  <link rel="stylesheet" type="text/css" href="css/global.css"/>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <!-- Other scripts -->
  <script type="text/javascript">
    $( document ).ready(function() {
      
      $('#search_button').on('click', function(){
            $('#output').html('');
            $.getJSON( "https://www.googleapis.com/books/v1/volumes?q=" + $("#search_box").val(),
            function(data) {
              var items = {};
              $.each(data['items'], function(val){
                if (data['items'][val]['volumeInfo'].hasOwnProperty('imageLinks')){
                  if (data['items'][val]['volumeInfo']['imageLinks'].hasOwnProperty('thumbnail')){
                    items[data['items'][val]['volumeInfo']['previewLink']] = 
                          data['items'][val]['volumeInfo']['imageLinks']['thumbnail'];
                  }
                }
              });
              
              $.each(items, function(key, val){
                  $('#output').append(formatOutput(key, val));
              });
          });
      });
      
      function formatOutput(key, val){
          return "<a href='" + key + "'target='_blank'><img src='" + val + "' alt='img'/></a>"; 
      }
    });
  </script>
  </head>
  <body>

  <div class="form-group">
    <input id="search_box" type="text" class="form-control"placeholder="Search">
  </div>
  
  <a href="#" id="search_button" class="btn btn-default">Seach</a>
      
  <div id="output"></output>

  </body>
</html>
